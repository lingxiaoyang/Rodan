language: python
cache: pip
services:
- redis-server

matrix:
  include:
  - os: linux
    sudo: required
    python: 2.7
    
before_install:
- echo before_install==========================================
- pwd
- ls -al
- sudo apt-get update -qy
- sudo /etc/init.d/postgresql stop
- sudo apt-get install -y postgresql-9.3 postgresql-contrib-9.3 postgresql-plpython-9.3
- sudo pip install redis
- sudo redis-server /etc/redis/redis.conf --port 6379
install:
- echo install=================================================
- pip install psycopg2==2.7.1
- pip install -r requirements.txt
before_script:
- echo before_script===========================================
- mv rodan/settings.py.development rodan/settings.py
- python manage.py makemigrations rodan
- python manage.py migrate
script: python manage.py test

notifications:
  email: false
